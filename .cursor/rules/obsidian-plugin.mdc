# Obsidian Plugin Development

## ğŸ¯ Plugin Architecture

### Core Components
- [main.ts](mdc:main.ts) - Plugin entry point
- [src/UltimaOrbPlugin.ts](mdc:src/UltimaOrbPlugin.ts) - Main plugin class
- [manifest.json](mdc:manifest.json) - Plugin metadata
- [esbuild.config.mjs](mdc:esbuild.config.mjs) - Build configuration

### Plugin Lifecycle
```typescript
export default class UltimaOrbPlugin extends Plugin {
  async onload() {
    // Initialize plugin
    // Register commands
    // Add settings tab
  }

  async onunload() {
    // Cleanup resources
    // Remove event listeners
  }
}
```

## ğŸ”§ Obsidian API Usage

### Plugin Settings
```typescript
class UltimaOrbSettingTab extends PluginSettingTab {
  display(): void {
    const { containerEl } = this;
    containerEl.empty();
    
    // Add settings controls
    new Setting(containerEl)
      .setName('Setting Name')
      .setDesc('Setting description')
      .addText(text => text
        .setPlaceholder('placeholder')
        .setValue('default value')
        .onChange(async (value) => {
          // Handle setting change
        }));
  }
}
```

### Commands
```typescript
this.addCommand({
  id: 'unique-command-id',
  name: 'Command Name',
  callback: () => {
    // Command logic
  },
  hotkeys: [{ modifiers: ['Mod'], key: 'Enter' }]
});
```

### UI Components
```typescript
// Create elements
const container = this.containerEl.createEl('div', {
  cls: 'my-plugin-container'
});

// Add content
container.createEl('h2', { text: 'Title' });
container.createEl('p', { text: 'Description' });
```

## ğŸ“ File Structure

### Source Organization
```
src/
â”œâ”€â”€ UltimaOrbPlugin.ts      # Main plugin class
â”œâ”€â”€ types/                  # TypeScript definitions
â”‚   â””â”€â”€ obsidian.d.ts      # Obsidian API types
â”œâ”€â”€ services/              # Core services
â”‚   â””â”€â”€ Logger.ts          # Logging service
â”œâ”€â”€ ui/                    # User interface
â”‚   â”œâ”€â”€ components/        # Reusable components
â”‚   â””â”€â”€ views/            # Main views
â””â”€â”€ utils/                # Utility functions
```

### Configuration Files
- [package.json](mdc:package.json) - Dependencies and scripts
- [tsconfig.json](mdc:tsconfig.json) - TypeScript configuration
- [.eslintrc.js](mdc:.eslintrc.js) - Code quality rules
- [manifest.json](mdc:manifest.json) - Plugin metadata

## ğŸš¨ Best Practices

### Plugin Development
- à¹ƒà¸Šà¹‰ [src/types/obsidian.d.ts](mdc:src/types/obsidian.d.ts) à¸ªà¸³à¸«à¸£à¸±à¸š Obsidian API types
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š plugin compatibility à¹ƒà¸™ [manifest.json](mdc:manifest.json)
- à¹ƒà¸Šà¹‰ proper error handling à¸ªà¸³à¸«à¸£à¸±à¸š async operations
- Clean up resources à¹ƒà¸™ `onunload()`

### UI Development
- à¹ƒà¸Šà¹‰ Obsidian's built-in UI components
- Follow Obsidian's design patterns
- à¹ƒà¸Šà¹‰ CSS classes à¸ªà¸³à¸«à¸£à¸±à¸š styling
- Test UI à¹ƒà¸™ different themes

### Data Management
- à¹ƒà¸Šà¹‰ `this.app.saveData()` à¹à¸¥à¸° `this.app.loadData()` à¸ªà¸³à¸«à¸£à¸±à¸š settings
- à¹ƒà¸Šà¹‰ proper data validation
- Handle data migration gracefully
- Backup important data

### Performance
- Lazy load components à¹€à¸¡à¸·à¹ˆà¸­à¸ˆà¸³à¹€à¸›à¹‡à¸™
- à¹ƒà¸Šà¹‰ debouncing à¸ªà¸³à¸«à¸£à¸±à¸š frequent operations
- Minimize DOM manipulations
- Clean up event listeners

## ğŸ”§ Development Workflow

### Build Process
```bash
npm run dev           # Development with hot reload
npm run build         # Production build
npm run type-check    # TypeScript validation
npm run lint          # Code quality check
```

### Testing
```bash
npm run test          # Run tests
npm run test:watch    # Watch mode
npm run test:coverage # Coverage report
```

### Debugging
- à¹ƒà¸Šà¹‰ `console.log()` à¸ªà¸³à¸«à¸£à¸±à¸š debugging
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š browser console
- à¹ƒà¸Šà¹‰ Obsidian's developer tools
- Test à¹ƒà¸™ different environments

## ğŸ“‹ Checklist

### Before Release
- [ ] TypeScript compilation passes
- [ ] ESLint passes
- [ ] All tests pass
- [ ] UI works in different themes
- [ ] Settings save/load correctly
- [ ] Commands work as expected
- [ ] Error handling is robust
- [ ] Documentation is complete
- [ ] Performance is acceptable
- [ ] Security considerations addressed
description:
globs:
alwaysApply: false
---
